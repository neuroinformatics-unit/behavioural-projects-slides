---
title: Behavioural Projects Overview
subtitle: SWC/GCNU Neuroinformatics Unit
author: Niko Sirmpilatze
execute: 
  enabled: true
format:
    revealjs:
        theme: [default, niu-light.scss]
        logo: img/logo_niu_light.png
        footer: "Discussion with AIND | 2023-09-29"
        slide-number: c
        menu:
            numbers: true
        chalkboard: true
        scrollable: true
        preview-links: false
        view-distance: 10
        mobile-view-distance: 10
        auto-animate: true
        auto-play-media: true
        code-overflow: wrap
        highlight-style: atom-one
        mermaid: 
          theme: neutral
          fontFamily: arial
          curve: linear
    html:
        theme: [default, niu-light.scss]
        logo: img/logo_niu_light.png
        date: "2023-09-29"
        toc: true
        code-overflow: scroll
        highlight-style: atom-one
        mermaid: 
          theme: neutral
          fontFamily: arial
          curve: linear
          margin-left: 0
        embed-resources: true
        page-layout: full
---

## Behavioural experiments at SWC

:::: {.columns}

::: {.column width="50%"}

![](img/swc-building.jpg){height=500}
:::

::: {.column width="50%"}

A diverse range:

- large collaborative projects
  - Zoo
  - Crabs
  - Aeon
- small-scale lab-specific projects
:::

::::

## Aeon

:::: {.columns}

::: {.column width="40%"}

![](img/aeon-arena.jpg){height=500}
:::

::: {.column width="60%"}

- Mice foraging in a large arena
- 24-hour recordings
- Multiple cameras
- Multi-animal tracking (SLEAP)
- Plans to combine with Neuropixels
:::

::::

::: aside
*Image: Chang Huan Lo* | Multiple SWC labs, [NeuroGears](https://neurogears.org/), [DataJoint](https://datajoint.com/), et al.
:::

## Crabs

:::: {.columns}

::: {.column width="50%"}

![](img/crab-detection.jpg){}
:::

::: {.column width="50%"}
- Fiddler crabs
  - in the wild
  - in a *naturalistic* lab setting
- Detection and tracking with custom CNNs
:::

::::

::: aside
*Image: Sofia Minano* | 
[Branco Lab](https://www.sainsburywellcome.org/web/groups/branco-lab), 
[Margrie Lab](https://www.sainsburywellcome.org/web/groups/margrie-lab),
[UCL ARC](https://www.ucl.ac.uk/advanced-research-computing)
:::

## Zoo

:::: {.columns}

::: {.column width="50%"}

![](img/zoo-wasp.png){}
:::

::: {.column width="50%"}
- Videos acquired at the London Zoo
- Multiple species from üêù to üêò
- Diverse environments
- Pose estimation and tracking (DeepLabCut)
:::

::::

::: aside
*Image: Sanna Titus* |
[ZSL](https://www.zsl.org/),
[Branco Lab](https://www.sainsburywellcome.org/web/groups/branco-lab), 
[Margrie Lab](https://www.sainsburywellcome.org/web/groups/margrie-lab),
[UCL ARC](https://www.ucl.ac.uk/advanced-research-computing)
:::

## Lab-specific projects

:::: {.columns}

::: {.column width="50%"}

![](img/EPM-mouse.png){}

:::

::: {.column width="50%"}

![](img/open-field-mouse.png){}

:::

::::

::: aside
*Images: Loukia Katsouri* |
[O'Keefe Lab](https://www.sainsburywellcome.org/web/groups/okeefe-lab)
:::

## Our priority

:::: {.columns}

::: {.column width="50%"}
Standardised video analysis pipeline, **but**:

- Flexible
- Modular
- Extensible
:::

::: {.column width="50%"}
```{mermaid}
%%| file: diagrams/video-pipeline.mmd
%%| fig-height: 500px
``` 
:::

::::

## How to achieve this?

::: {.incremental}
- Make existing tools easier to use for researchers
- Develop new tools to fill gaps in the ecosystem
- Make existing and new tools interoperable
:::


## Working with existing tools {.smaller}

:::: {.columns}

::: {.column width="40%"}

Pose estimation libraries:

- [DeepLabCut](http://www.mackenziemathislab.org/deeplabcut)
- [SLEAP](https://sleap.ai/)
- Many others...

**But**:

- Know-how required
- GPU-intensive
:::

::: {.column width="60%"}
```{mermaid}
%%| file: diagrams/video-pipeline_emph-pose.mmd
%%| fig-height: 500px
``` 
:::

::::

## Working with existing tools

- Centrally installed modules on HPC cluster

```{.bash}
module load deeplabcut
module load SLEAP
```

::: {.fragment}
- Curate [detailed how-to guides](https://howto.neuroinformatics.dev/data_analysis/HPC-module-SLEAP.html){preview-link="true" style="text-align: center"}
:::

::: {.fragment}
- Deliver courses and workshops on:
  - Pose estimation with SLEAP
  - Linux and HPC
:::

## Developing new tools

:::: {.columns}

::: {.column width="40%"}
What happens after pose estimation?
:::

::: {.column width="60%"}
```{mermaid}
%%| file: diagrams/video-pipeline_emph-kino.mmd
%%| fig-height: 500px
``` 
:::

::::

## Just a code block, nothing gets executed...

... but there is some fancy highlighting

```{.python code-line-numbers="1|3|4-9"}
from pathlib import Path

home_path = Path.home()
if home_path.exists():
  data_path = home_path / "data"
else:
  pass
  # raise some error maybe?
```

## A code block that's actually executed at render-time

```{python}
#| echo: true
#| code-fold: true

from pathlib import Path

print("Hello world")
```

## You can execute code without showing that you have by using #|echo: false
```{python}
#| echo: false

from pathlib import Path

print("Hello world")
```

{{< include slides/extra_slide.qmd >}}

## An example image

Include an image:

![](img/bg_logo_wide.png){width=900 fig-align=center}


## Link and a preview a webpage:

::: {style="text-align: center; margin-top: 1em"}
[interoperable Python-based tools for computational neuroanatomy](https://brainglobe.info/index.html){preview-link="true" style="text-align: center"}
:::